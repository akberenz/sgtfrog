/*!
// ==UserScript==
// @name         SteamGifts Tinkerer, Featuring Refined Ostensible Gain
// @namespace    https://github.com/bberenz/sgtfrog
// @description  SteamGifts.com user controlled enchancements
// @icon         https://raw.githubusercontent.com/bberenz/sgtfrog/master/keroro.gif
// @include      *://*.steamgifts.com/*
// @version      0.6.7
// @downloadURL  https://raw.githubusercontent.com/bberenz/sgtfrog/master/sgtfrog.user.js
// @updateURL    https://raw.githubusercontent.com/bberenz/sgtfrog/master/sgtfrog.meta.js
// @require      https://code.jquery.com/jquery-1.12.3.min.js
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// ==/UserScript==
*/
(function(){var t=$(document);if($(".nav__sits").length){console.warn("[RIBBIT] User is not logged in, cannot run script.");throw new Error("No lilypad.")}var m={fixedElms:{value:GM_getValue("fixedElms",6),set:{type:"square",opt:["Header","Sidebar","Footer"]},query:"Set fixed elements:"},loadLists:{value:GM_getValue("loadLists",15),set:{type:"square",opt:["Giveaways","Discussions","Trades","Comments"]},query:"Continuously load:"},gridView:{value:GM_getValue("gridView",0),set:{type:"circle",opt:["Yes","No"]},query:"Show giveaways in a grid view?"},featuredGA:{value:GM_getValue("featuredGA",2),set:{type:"circle",opt:["Yes","Expanded","No"]},query:"Show featured giveaways section?"},hideEntry:{value:GM_getValue("hideEntry",1),set:{type:"circle",opt:["Yes","No"]},query:"Hide entered giveaways?"},oneHide:{value:GM_getValue("oneHide",0),set:{type:"circle",opt:["Yes","No"]},query:"Skip confirmation when hiding games?"},winPercent:{value:GM_getValue("winPercent",1),set:{type:"circle",opt:["Yes","No"]},query:"Show giveaway win percentage?"},searchSame:{value:GM_getValue("searchSame",1),set:{type:"circle",opt:["Yes","No"]},query:"Show buttons to quickly search for similar giveaways?"},newBadges:{value:GM_getValue("newBadges",1),set:{type:"circle",opt:["Yes","No"]},query:"Show additional giveaway badges?"},colorBadge:{value:GM_getValue("colorBadge",1),set:{type:"circle",opt:["Yes","No"]},query:"Recolor standard giveaway badges?"},searchNav:{value:GM_getValue("searchNav",0),set:{type:"circle",opt:["Yes","No"]},query:"Show the giveaway search bar in the top navigation?"},pointInvl:{value:GM_getValue("pointInvl",0),set:{type:"number",opt:["Seconds"],about:"Value in seconds, enter 0 to disable."},query:"Regularly update header values (points, messages, etc.)?"},sideMine:{value:GM_getValue("sideMine",0),set:{type:"circle",opt:["Yes","No"]},query:"Hide 'My Giveaways' in the sidebar? (Still available under nav dropdown)"},activeTalk:{value:GM_getValue("activeTalk",2),set:{type:"circle",opt:["Yes","Sidebar","No"]},query:"Show the 'Active Discussions' section?"},collapsed:{value:GM_getValue("collapsed",3),set:{type:"square",opt:["Discussions","Trades"]},query:"After first page, collapse original post:"},tracking:{value:GM_getValue("tracking",0),set:{type:"square",opt:["Discussions","Trades"]},query:"Track read comments and topics:"},userTools:{value:GM_getValue("userTools",1),set:{type:"circle",opt:["Yes","No"]},query:"Show SGTools links on user pages?"},hoverInfo:{value:GM_getValue("userDetail",1),set:{type:"circle",opt:["Yes","No"]},query:"Show profile details on avatar hover?"},userLists:{value:GM_getValue("userLists",1),set:{type:"circle",opt:["Yes","No"]},query:"Label black-/white- listed users?",sub:{name:"Configure",settings:{userWhite:{value:JSON.parse(GM_getValue("userWhite",'{"Foreground": "", "Background": ""}')),set:{type:"text",opt:["Foreground","Background"],about:"Enter value as hexadecimal color, leave blank for defaults."},query:"Whitelisted label colors:"},userBlack:{value:JSON.parse(GM_getValue("userBlack",'{"Foreground": "", "Background": ""}')),set:{type:"text",opt:["Foreground","Background"],about:"Enter value as hexadecimal color, leave blank for defaults."},query:"Blacklisted label colors:"}}}}};
var k={users:JSON.parse(GM_getValue("userTags","{}")),groups:JSON.parse(GM_getValue("groupTags","{}"))};var b={discuss:JSON.parse(GM_getValue("tracks[discuss]","{}")),trade:JSON.parse(GM_getValue("tracks[trade]","{}"))};var f={};for(var p in k.users){if(k.users.hasOwnProperty(p)){if(p.indexOf("/group/")==0){console.debug("Found old group tag => "+p);k.groups[p.substring(7)]=k.users[p];delete k.users[p]}}}GM_setValue("userTags",JSON.stringify(k.users));GM_setValue("groupTags",JSON.stringify(k.groups));var n=-2,h={debug:function(u){if(n<-1){console.debug("[SGT DEBUG] ",u)}},info:function(u){if(n<0){console.log("[SGT INFO] ",u)}},warn:function(u){if(n<0){console.warn("[SGT WARN] ",u)}},alert:function(u){console.log("[SGT ALERT] ",u)}},o={fromQuery:function(w){var v,u={},y=/([^&=]+)=?([^&]*)/g,x=function(z){return decodeURIComponent(z.replace(/\+/g," "))};while(v=y.exec(location.search.substring(1))){u[x(v[1])]=x(v[2])}return u[w]},isGAlist:function(){return !(~location.href.indexOf("/trade")||~location.href.indexOf("/discussion")||~location.href.indexOf("/giveaway/")||~location.href.indexOf("/account/")||~location.href.indexOf("/archive")||~location.href.indexOf("/settings"))},listingPit:{cache:{wishes:{name:"cache-wish",page:"/account/steam/wishlist/search?page=",touches:".table__column__secondary-link",list:null},white:{name:"cache-white",page:"/account/manage/whitelist/search?page=",touches:".table__column__heading",list:null},black:{name:"cache-black",page:"/account/manage/blacklist/search?page=",touches:".table__column__heading",list:null}},getList:function(v,x){h.debug("Pulling list for "+v);var u=o.listingPit.cache[v];if(!u.list){var w=JSON.parse(GM_getValue(u.name,null));if(w==null){h.debug("Entering hell..");o.listingPit.callbackHell(u.page,1,u.touches,function(y){GM_setValue(u.name,JSON.stringify(y));GM_setValue(u.name+"-time",Date.now());u.list=y;x(y)})}else{h.debug("Had it saved..");u.list=w;x(w)}}else{h.debug("Already loaded..");x(u.list)}},invalidateList:function(u){h.debug("Invalidating "+u);GM_setValue(o.listingPit.cache[u].name,null)},callbackHell:function(v,x,w,u){$.ajax({method:"GET",url:v+x}).done(function(B){var z=$(B),A=z.find(".pagination__navigation").children().last().attr("data-page-number");var y=[];$.each(z.find(w),function(C,D){y.push($(D).attr("href"))});if(x<A){h.debug("Going deeper..");o.listingPit.callbackHell(v,++x,w,function(C){u($.merge(y,C))})}else{u(y)}})}},makeSideLink:function(v,u,x,w){var A=$("<li/>").addClass("sidebar__navigation__item");var y=$("<a/>").addClass("sidebar__navigation__item__link").attr("href",v).appendTo(A);var z=$("<div/>").addClass("sidebar__navigation__item__name").html(u).appendTo(y);if(w!==undefined){$("<div/>").addClass("sidebar__navigation__item__count").html(w).appendTo(z)}$("<div/>").addClass("sidebar__navigation__item__underline").appendTo(y);if(x!==undefined){$("<div/>").addClass("sidebar__navigation__item__count").html(x).appendTo(y)}return A},makeTopLink:function(x,w,A,y,v){var z=$("<a/>").addClass("nav__row").attr("href",x);
$("<i/>").addClass("icon-"+v).addClass("fa fa-fw fa-"+y).appendTo(z);var u=$("<div/>").addClass("nav__row__summary").appendTo(z);$("<p/>").addClass("nav__row__summary__name").html(w).appendTo(u);$("<p/>").addClass("nav__row__summary__description").html(A).appendTo(u);return z},settings:{makeRow:function(D,w,C,u){var z;switch(u.set.type){case"circle":z=o.settings.makeRadio(w,C,u);break;case"square":z=o.settings.makeCheck(w,C,u);break;case"number":case"text":z=o.settings.makeText(w,C,u);break;default:h.warn("Cannot determine options type: "+u.set.type);return}D.append(z);if(u.sub){z.find(".form__checkbox").last().after($("<div/>").addClass("form__checkbox is-selected").append($("<a/>").html(u.sub.name)).on("click",function(E){$("#sub_"+C).toggle();E.stopImmediatePropagation()}));var A="abcde";var y=$("<div/>").attr("id","sub_"+C).css("display","none").appendTo(D);var B=Object.keys(u.sub.settings);for(var x=0;x<B.length;x++){var v=B[x];if(u.sub.settings.hasOwnProperty(v)){o.settings.makeRow(y,w+A.substring(x,x+1),v,u.sub.settings[v])}}}},makeHeading:function(w,v){var u=$("<div/>").addClass("form__row");$("<div/>").addClass("form__heading").append($("<div/>").addClass("form__heading__number").html(w+".")).append($("<div/>").addClass("form__heading__text").html(v)).appendTo(u);return u},makeRadio:function(y,x,w){var A=$("<div/>").append($("<input/>").attr("type","hidden").attr("name",x).val(w.value));for(var v=0;v<w.set.opt.length;v++){var z=w.set.opt.length-1-v;var u=$("<div/>").addClass("form__checkbox").attr("data-checkbox-value",z).append("<i class='form__checkbox__default fa fa-circle-o'></i>").append("<i class='form__checkbox__hover fa fa-circle'></i>").append("<i class='form__checkbox__selected fa fa-check-circle'></i>").append(w.set.opt[v]);if(w.value==z){u.addClass("is-selected")}else{u.addClass("is-disabled")}A.append(u)}return o.settings.makeHeading(y,w.query).append($("<div/>").addClass("form__row__indent").append(A))},makeCheck:function(x,w,v){var A=$("<div/>").append($("<input/>").attr("type","hidden").attr("name",w).val(v.value));for(var u=0;u<v.set.opt.length;u++){var z=Math.pow(2,v.set.opt.length-1-u);var y=$("<div/>").addClass("form__checkbox").attr("data-checkbox-value",z).append("<i class='form__checkbox__default fa fa-square-o'></i>").append("<i class='form__checkbox__hover fa fa-square'></i>").append("<i class='form__checkbox__selected fa fa-check-square'></i>").append(v.set.opt[u]).on("click",function(B){var C=$(this),D=C.siblings("input");D.val(D.val()^C.attr("data-checkbox-value"));if(D.val()&C.attr("data-checkbox-value")){C.removeClass("is-disabled").addClass("is-selected")}else{C.addClass("is-disabled").removeClass("is-selected")}B.stopImmediatePropagation()});if(v.value&z){y.addClass("is-selected")}else{y.addClass("is-disabled")}A.append(y)}return o.settings.makeHeading(x,v.query).append($("<div/>").addClass("form__row__indent").append(A))},makeText:function(y,x,v){var u=$("<div/>").addClass("form__row__indent");$.each(v.set.opt,function(A,z){var C=v.value,B="";
if(v.set.opt.length>1){C=v.value[z];B="_"+A}u.append($("<input/>").attr("type",v.set.type).attr("name",x+B).attr("placeholder",z).addClass("form__input-small").val(C))});var w=$("<div/>").addClass("form__input-description").html(v.set.about);return o.settings.makeHeading(y,v.query).append(u.append(w))}},applyGradients:function(v,u){v.css("background-image","linear-gradient("+u+")").css("background-image","-moz-linear-gradient("+u+")").css("background-image","-webkit-linear-gradient("+u+")")}},q={invalidateOnSync:function(){if(!m.newBadges.value||!~location.href.indexOf("/profile/sync")){return}$(".form__sync-default").on("click",function(){o.listingPit.invalidateList("wishes")})},injectMenu:function(w){h.debug("Adding custom navigation");var v=$("<div/>").addClass("nav__button-container");$("<a/>").addClass("nav__button nav__buton--is-dropdown").attr("href","/ąccount/settings/ribbit").html("SGT frog").appendTo(v);$("<div/>").addClass("nav__button nav__button--is-dropdown-arrow").html("<i class='fa fa-angle-down'></i>").appendTo(v).on("click",function(z){var y=$(this).hasClass("is-selected");$("nav .nav__button").removeClass("is-selected"),$("nav .nav__relative-dropdown").addClass("is-hidden"),y||$(this).addClass("is-selected").siblings(".nav__relative-dropdown").removeClass("is-hidden"),z.stopImmediatePropagation()});var x=$("<div/>").addClass("nav__relative-dropdown is-hidden").appendTo(v);$("<div/>").addClass("nav__absolute-dropdown").append(o.makeTopLink("/ąccount/settings/ribbit","Settings","Adjust tool functionality.","gears","grey")).append(o.makeTopLink("https://github.com/bberenz/sgtfrog/issues","Feedback","Report an issue or request a feature.","github","green")).append(o.makeTopLink("https://www.steamgifts.com/discussion/4C3Cl/userscript-steamgifts-tinkerer-featuring-refined-ostensible-gain","Discussion","View the SteamGifts discussion thread.","square-o","blue")).appendTo(x);$(".nav__right-container").find(".nav__button-container:not(.nav__button-container--notification)").last().before(v);var u=o.makeSideLink("/ąccount/settings/ribbit","SGT frog");$(".sidebar__navigation").find("a[href='/account/settings/sales']").parent().after(u);if(w){u.addClass("is-selected");u.find(".sidebar__navigation__item__name").before("<i class='fa fa-caret-right'></i>")}},injectPage:function(){if(location.pathname==="/%C4%85ccount/settings/ribbit"){h.info("Creating custom settings page");GM_addStyle("body{ background-image: none; background-color: #95A4C0; }");var u=$("style").detach();$("html").empty();$.ajax({method:"GET",url:"/account/settings/sales"}).done(function(A){var y=A.substring(A.indexOf("<head>")+6,A.indexOf("</head>")).replace(/<script [\s\S]+?<\/script>/g,"");$("<head/>").appendTo("html").append(y).append("<script src='https://cdn.steamgifts.com/js/minified.js'><\/script>");$("<body/>").appendTo("html").append(A.substring(A.indexOf("<body>")+6,A.indexOf("</body>")));u.appendTo("html");$(".page__heading__breadcrumbs").children("a").last().html("Sgt Frog").attr("href","/ąccount/settings/ribbit");
$(".sidebar__navigation").find("a[href='/account/settings/sales']").parent().removeClass("is-selected").find("i").remove();$("title").html("Account - Settings - Ribbit");var w=$(".form__rows");w.empty();var z=Object.keys(m);for(var x=0;x<z.length;x++){var v=z[x];if(m.hasOwnProperty(v)){o.settings.makeRow(w,x+1,v,m[v])}}$("<div/>").addClass("form__submit-button").html("<i class='fa fa-arrow-circle-right'></i> Save Changes").on("click",function(){q.save(m)}).appendTo(w);h.debug("Creation complete");window.setTimeout(function(){q.injectMenu(true);c.injectNavSearch();a.header();a.sidebar();a.footer();t.scroll()},500)})}},save:function(A){var y=function(D,E){h.debug("Setting "+D+" to "+E);GM_setValue(D,E)};var C=Object.keys(A);for(var x=0;x<C.length;x++){var v=C[x];if(A.hasOwnProperty(v)){if(A[v].set.type=="text"&&A[v].set.opt.length>1){var B={};for(var w=0;w<A[v].set.opt.length;w++){var u=$("input[name='"+v+"_"+w+"']");B[A[v].set.opt[w]]=u.val()}y(v,JSON.stringify(B))}else{var z=$("input[name='"+v+"']");y(v,+z.val())}if(A[v].sub){q.save(A[v].sub.settings)}}}h.info("Saved new settings");window.scrollTo(0,0);location.reload()}},a={header:function(){if(!(m.fixedElms.value&4)){return}GM_addStyle("header.fixed{ position: fixed; top: 0; width: 100%; z-index: 100; } .left-above{ margin-top: 39px !important; }");$("header").addClass("fixed");var u=$(".featured__container");if(u.length>0){u.addClass("left-above")}else{$(".page__outer-wrap").addClass("left-above")}},sidebar:function(){if(!(m.fixedElms.value&2)){return}var x=m.fixedElms.value&4?64:25;GM_addStyle(".sidebar .fixed{ position: fixed; top: "+x+"px; }");var v=$(".sidebar"),u=$("<div/>").addClass("sidebar__outer-wrap"),w=$(".sidebar__mpu");v.children().detach().appendTo(u);u.appendTo(v);t.on("scroll",function(){var y=$(".featured__container").height()+64;if(t.scrollTop()>(y-x)){v.children().addClass("fixed");w.hide()}else{v.children().removeClass("fixed");w.show()}});u.css("width",v.css("min-width")).css("min-width",v.css("min-width")).css("max-width",v.css("max-width"))},footer:function(){if(!(m.fixedElms.value&1)){return}GM_addStyle(".footer__outer-wrap.fixed{ position: fixed; bottom: 0; width: 100%;   background-color: #95a4c0; z-index: 100; } .left-below{ margin-bottom: 45px; }");$(".footer__outer-wrap").addClass("fixed");$(".page__outer-wrap").addClass("left-below")}},d={addSpinner:function(u){u.after($("<div/>").addClass("pagination__loader").html("<i class='fa fa-spin fa-circle-o-notch'></i>"))},removeSpinner:function(){$(".pagination__loader").remove()},everyNew:function(u){c.injectFlags.wishlist(u,true);c.injectFlags.recent(u,true);c.injectChance(u);c.injectSearch(u,true);c.hideEntered(u);c.easyHide(u);c.gridForm(u,true);l.profileHover(u,true);l.tagging.show(u,true);l.listIndication(u,true)},giveaways:function(){if(!(m.loadLists.value&8)||!o.isGAlist()){return}GM_addStyle(".pagination__loader{ text-align: center; margin-top: 1em; } .pagination__loader .fa{ font-size: 2em; } ");var v=o.fromQuery("page");
if(v==undefined){v=1}$(".widget-container").find(".page__heading").first().after($(".pagination").detach());var u=false;t.on("scroll",function(){var w=(t.scrollTop()+$(window).height())/t.height();if(w>=0.9&&!u){u=true;v++;var x=location.href;if(~x.indexOf("?")){x=x.replace(/page=\d+?&?/,"")}else{if(location.pathname.length==1){x+="/giveaways"}x+="/search?"}h.info("Loading next page: "+v);d.addSpinner($(".giveaway__row-outer-wrap").last());h.debug(x+"&page="+v);$.ajax({method:"GET",url:x+"&page="+v}).done(function(D){var A=$(D);d.everyNew(A);A.find(".pinned-giveaways__outer-wrap").remove();var C=A.find(".giveaway__row-outer-wrap").detach();var B=A.find(".pagination");var z=B.find(".pagination__navigation");if(C.length===0||(~location.href.indexOf("/group/")&&z.children().last().text().trim()!=="Last")){h.info("No more giveaways");d.removeSpinner();var y=z.children().last().attr("data-page-number");if(!y||v-1==y){return}}z.html("Page "+v);$(".giveaway__row-outer-wrap").last().parent().append(B).append(C);u=false;d.removeSpinner()})}})},trade:function(){if(!(m.loadLists.value&2)||!~location.href.indexOf("/trade/")){return}d.comments()},threads:function(){if(!(m.loadLists.value&4)||!~location.href.indexOf("/discussion/")){return}d.comments()},thanks:function(){if(!(m.loadLists.value&1)||!~location.href.indexOf("/giveaway/")){return}d.comments()},comments:function(){GM_addStyle(".pagination__loader{ text-align: center; margin-top: 1em; } .pagination__loader .fa{ font-size: 2em; } ");var w=o.fromQuery("page");if(w==undefined){w=1}var v=$(".pagination__navigation").children().last().attr("data-page-number");$(".page__heading").last().after($(".pagination").detach());var u=false;t.on("scroll",function(){var x=(t.scrollTop()+$(window).height())/t.height();if(x>=0.9&&!u){u=true;if(w++<v){var y=location.href;if(~y.indexOf("?")){y=y.replace(/page=\d+?&?/,"")}else{y+="/search?"}d.addSpinner($(".comments").last());h.info("Loading next page: "+w+"/"+v);h.debug(y+"&page="+w);$.ajax({method:"GET",url:y+"&page="+w}).done(function(B){var z=$(B);l.profileHover(z,true);l.tagging.show(z,true);l.listIndication(z,true);r.injectTimes(z);r.tracking.all(z);var A=z.find(".pagination");A.find(".pagination__navigation").html("Page "+w);$(".comments").last().append(A).append(z.find(".comments").last().children().detach());u=false;d.removeSpinner()})}}})},points:function(){if(m.pointInvl.value<1||isNaN(m.pointInvl.value)){return}if(m.pointInvl.value<15){h.alert("Failed to apply defined points interval, using 15 seconds instead");m.pointInvl.value=15}window.setInterval(function(){h.debug("Pulling new header values");$.ajax({method:"GET",url:"/about/brand-assets"}).done(function(v){var u=$(v);$(".nav__points").html(u.find(".nav__points").html());var w=$(".nav__button-container--notification");$.each(u.find(".nav__button-container--notification"),function(y,x){var z=$(w[y]),A=$(x);z.html(A.html());if(A.hasClass("nav__button-container--active")){z.removeClass("nav__button-container--inactive").addClass("nav__button-container--active")
}else{z.removeClass("nav__button-container--active").addClass("nav__button-container--inactive")}})})},m.pointInvl.value*1000)}},j={removeMyGA:function(){if(!m.sideMine.value){return}var v=$(".sidebar");var u=v.find(".sidebar__heading").last();if(u.html()==="My Giveaways"){u.remove();v.find(".sidebar__navigation").last().remove()}},injectSGTools:function(){if(!m.userTools.value||!~location.pathname.indexOf("/user/")){return}var v=location.href.split("/")[4];h.debug("Found user: "+v);var u=$(".sidebar__navigation").last(),w=$("<ul/>").append(o.makeSideLink("http://www.sgtools.info/sent/"+v,"Real Value Sent").find("a").attr("target","_check"),o.makeSideLink("http://www.sgtools.info/won/"+v,"Real Value Won").find("a").attr("target","_check"),o.makeSideLink("http://www.sgtools.info/nonactivated/"+v,"Non-Activated").find("a").attr("target","_check"),o.makeSideLink("http://www.sgtools.info/multiple/"+v,"Multi Wins").find("a").attr("target","_check"));$("<h3/>").html("SG Tools").addClass("sidebar__heading").insertAfter(u).after(w.addClass("sidebar__navigation"))}},c={injectFlags:{all:function(u){if(m.newBadges.value){c.injectFlags.wishlist(u);c.injectFlags.recent(u)}if(m.colorBadge.value){c.injectFlags.invite();c.injectFlags.region();c.injectFlags.whitelist();c.injectFlags.group()}},wishlist:function(x,v){var u=$(".giveaway__row-outer-wrap");if(u.length>0){if(!v){GM_addStyle(".giveaway__column--wish{ background-image: linear-gradient(#FFFACF 0%, #FFF176 100%);   background-image: -moz-linear-gradient(#FFFACF 0%, #FFF176 100%);   background-image: -webkit-linear-gradient(#FFFACF 0%, #FFF176 100%);   border-color: #EDCCBE #F0C2AF #DEAB95 #F2C4B1 !important; color: #F57F17;   box-shadow: none !important; }")}var w=$("<div/>").addClass("giveaway__column--wish").attr("title","Wishlist");$("<i/>").addClass("fa fa-fw fa-star").appendTo(w);if(Date.now()-GM_getValue("cache-wish-time",0)>(24*60*60*1000)){o.listingPit.invalidateList("wishes")}o.listingPit.getList("wishes",function(y){h.info("Applying badges for "+y.length+" wishes");$.each(y,function(A,C){var z=x.find("a[href='"+C+"']").parent().parent();var B=z.find(".giveaway__columns--badges");if(B.length){B.prepend(w.clone())}else{z.find(".giveaway__column--width-fill").after(w.clone())}})})}},recent:function(w,u){if(!u){GM_addStyle(".giveaway__column--new{   background-image: linear-gradient(#FFE0B2 0%, #FFB74D 100%);   background-image: -moz-linear-gradient(#FFE0B2 0%, #FFB74D 100%);   background-image: -webkit-linear-gradient(#FFE0B2 0%, #FFB74D 100%);   border-color: #FFCCBC #FFAB91 #FF8A65 #FFAB91 !important; color: #BF360C;   box-shadow: none !important; }")}var v=$("<div/>").addClass("giveaway__column--new").attr("title","New");$("<i/>").addClass("fa fa-fw fa-fire").appendTo(v);$.each(w.find(".giveaway__column--width-fill").find("span"),function(x,A){var z=$(A);var y=z.html();if(~y.indexOf("second")||~y.indexOf("minute")){z.parent().parent().find(".giveaway__column--width-fill").after(v.clone())}})},invite:function(){GM_addStyle(".giveaway__column--invite-only{ background-image: linear-gradient(#FFCDD2 0%, #F49B95 100%);   background-image: -moz-linear-gradient(#FFCDD2 0%, #F49B95 100%);   background-image: -webkit-linear-gradient(#FFCDD2 0%, #F49B95 100%);   border-color: #ef9a9a #e57373 #ef5350 #e57373 !important; color: #950000; }")
},region:function(){GM_addStyle(".giveaway__column--region-restricted{ background-image: linear-gradient(#D7CCC8 0%, #A18F89 100%);   background-image: -moz-linear-gradient(#D7CCC8 0%, #A18F89 100%);   background-image: -webkit-linear-gradient(#D7CCC8 0%, #A18F89 100%);   border-color: #BDBDBD #9E9E9E #757575 #9E9E9E !important; color: #5D4037; }")},whitelist:function(){GM_addStyle(".giveaway__column--whitelist{ background-image: linear-gradient(#FFFFFF 0%, #E0E0E0 100%);   background-image: -moz-linear-gradient(#FFFFFF 0%, #E0E0E0 100%);   background-image: -webkit-linear-gradient(#FFFFFF 0%, #E0E0E0 100%);   color: #D81B60 !important; }")},group:function(){GM_addStyle(".giveaway__column--group{ background-image: linear-gradient(#DCEDC8 0%, #AED581 100%);   background-image: -moz-linear-gradient(#DCEDC8 0%, #AED581 100%);   background-image: -webkit-linear-gradient(#DCEDC8 0%, #AED581 100%); ")}},injectChance:function(v){if(!m.winPercent.value){return}var u=function(w,x){return"<i class='fa fa-bar-chart'></i> <span>"+Math.min(100,(1/w)*x*100).toFixed(3)+"% chance</span>"};$.each(v.find(".giveaway__row-outer-wrap"),function(x,C){var A=$(C);var w=A.find(".fa-tag").next().html().split(/\s/)[0].replace(/,/g,"");var z=A.find(".giveaway__columns").children().first().find("span").html().substr(0,5);if(z!=="Ended"&&!A.find(".giveaway__row-inner-wrap").hasClass("is-faded")){w++}var B=1;var D=A.find(".giveaway__heading__thin").first().html();if(D&&~D.indexOf("Copies")){B=+(D.replace(/([\(\),\s]|Copies)/g,""))}var y=$("<div/>").html(u(w,B));A.find(".giveaway__columns").children().first().after(y)});$.each(v.find(".featured__columns"),function(z,B){var y=v.find(".live__entry-count");if(!y||y.length===0){return}var w=y.html().replace(/,/g,"");var x=v.find(".sidebar__entry-insert");if(x&&x.length>0&&!x.hasClass("is-hidden")){w++}var C=1;var D=v.find(".featured__heading__small").first().html();if(~D.indexOf("Copies")){C=+(D.replace(/([\(\),\s]|Copies)/g,""))}var A=$("<div/>").addClass("featured__column").html(u(w,C));$(B).children().first().after(A)})},injectSearch:function(x,v){if(!m.searchSame.value){return}$.each(x.find(".giveaway__heading"),function(y,A){var z=$(A);$("<a/>").addClass("giveaway__icon").html("<i class='fa fa-search-plus'></i>").attr("title","Find similar giveaways").attr("href","/giveaways/search?q="+z.find(".giveaway__heading__name").html()).appendTo(z)});if(~location.href.indexOf("/giveaway/")){if(!v){GM_addStyle(".sidebar__shortcut-inner-wrap div{ padding: 0; } .sidebar__shortcut-inner-wrap .sidebar__error{ border-color: #f0d1dc #e5bccc #d9a7ba #ebbecf; }")}var u=$(".sidebar__navigation").parent();var w=u.children().first().not(".sidebar__mpu").detach();if(!w.hasClass("sidebar__error")){w.css("background-image","none").css("border","none")}else{o.applyGradients(w,"#f7edf1 0%, #e6d9de 100%")}$("<div/>").addClass("sidebar__shortcut-inner-wrap").append($("<a/>").addClass("sidebar__entry-loading").css("max-width",(w.length>0?"33%":"100%")).html("<i class='fa fa-search'></i> Find Similar").attr("href","/giveaways/search?q="+$(".featured__heading__medium").html())).append(w).appendTo($("<div/>").addClass("sidebar__shortcut-outer-wrap").prependTo(u))
}},injectNavSearch:function(){if(!m.searchNav.value){return}var u=$("<div/>").addClass("sidebar__search-container").css("margin","0 5px 0 0").css("height","inherit").append($("<input class='sidebar__search__ga-input' placeholder='Search Giveaways...' value='' type='text' />").css("padding","0").css("border","none").on("keypress",function(v){if(v.which===13){location.href="/giveaways/search?q="+$(this).val();v.stopImmediatePropagation()}})).append("<i class='fa fa-search'></i>");$(".nav__left-container").prepend(u)},hideEntered:function(u){if(!m.hideEntry.value||~location.href.indexOf("/user/")||~location.href.indexOf("/group/")){return}u.find(".is-faded").parent(".giveaway__row-outer-wrap").remove()},easyHide:function(u){if(!m.oneHide.value){return}u.find("[data-popup='popup--hide-games']").on("click",function(v){window.setTimeout(function(){$(".js__submit-hide-games").click()},100)})},gridForm:function(v,u){if(!m.gridView.value||!o.isGAlist()){return}if(!u){GM_addStyle(".pagination{ clear: both; } .giveaway__row-outer-wrap{ width: 19%; margin-right: 1%; float: left; } .giveaway__row-inner-wrap{ display: block; } .global__image-outer-wrap--game-medium{ width: initial; margin: 0 auto !important; } .giveaway__heading{ display: block; text-align: center; } .giveaway__heading:first-of-type{ height: auto; text-overflow: ellipsis; overflow: hidden; } .giveaway__columns-full{ display: block; } .giveaway__columns-full > :not(:last-child){ margin: 0 0 5px 0; } .giveaway__columns--badges{ margin-bottom: 5px; } .giveaway__columns--badges > .giveaway__column--contributor-level:not(.giveaway__column--empty){ -webkit-box-flex: 1; -moz-box-flex: 1; -webkit-flex: 1; -ms-flex: 1; flex: 1; } .giveaway__column--empty{ height: 26px; width: 0; padding: 0; margin: 0 !important; visibility: hidden; } .giveaway__links{ display: block; margin-top: 5px; } .giveaway__links a{ margin-right: 5px; } .pinned-giveaways__inner-wrap--minimized .giveaway__row-outer-wrap:nth-child(-n+5){ display: initial; } .giveaway__row--empty{ clear: both; } ")}v.find(".giveaway__columns").addClass("giveaway__columns-full");$.each(v.find(".giveaway__row-outer-wrap"),function(y,z){var w=$(z);w.find(".global__image-outer-wrap--avatar-small").remove();w.find(".giveaway__row-inner-wrap").prepend(w.find(".global__image-outer-wrap--game-medium").detach());w.find(".giveaway__summary").prepend($("<h2/>").addClass("giveaway__heading").html(w.find(".giveaway__heading__name").detach()));w.find(".giveaway__columns").before($("<div/>").addClass("giveaway__columns giveaway__columns--badges").html(w.find(".giveaway__column--width-fill").nextAll().detach()).prepend($("<div/>").addClass("giveaway__column--empty")));var x=w.find(".fa-tag").next();x.html(x.text().replace(/([\d,]+) \w+/,"$1"));x=w.find(".fa-comment").next();x.html(x.text().replace(/([\d,]+) \w+/,"$1"))});v.find(".pinned-giveaways__inner-wrap").append($("<div/>").addClass("giveaway__row--empty"))},bulkFeatured:{find:function(){switch(m.featuredGA.value){case 0:c.bulkFeatured.hidden();
break;case 1:c.bulkFeatured.expanded();break;default:c.bulkFeatured.injectCollapsable();break}},injectCollapsable:function(){if($(".pinned-giveaways__inner-wrap").children().length<3){return}GM_addStyle(".pinned-giveaways__button{ clear: both; } .pinned-giveaways__inner-wrap:not(.pinned-giveaways__inner-wrap--minimized){   border-radius: 4px 4px 0 0; margin-bottom: 0; }");$(".pinned-giveaways__button").off("click");$(".pinned-giveaways__button").addClass("pinned-giveaways__button-expand");var u=$("<div/>").hide().addClass("pinned-giveaways__button").addClass("pinned-giveaways__button-collapse").html("<i class='fa fa-angle-up'></i>").appendTo(".pinned-giveaways__outer-wrap");u.on("click",function(v){$(".pinned-giveaways__inner-wrap").addClass("pinned-giveaways__inner-wrap--minimized");$(".pinned-giveaways__button-expand").show();$(".pinned-giveaways__button-collapse").hide();v.preventDefault()});$(".pinned-giveaways__button-expand").on("click",function(){$(".pinned-giveaways__inner-wrap").removeClass("pinned-giveaways__inner-wrap--minimized");$(".pinned-giveaways__button-expand").hide();$(".pinned-giveaways__button-collapse").show()})},hidden:function(){$(".pinned-giveaways__outer-wrap").remove()},expanded:function(){c.bulkFeatured.injectCollapsable();$(".pinned-giveaways__inner-wrap").removeClass("pinned-giveaways__inner-wrap--minimized");$(".pinned-giveaways__button-expand").hide();$(".pinned-giveaways__button-collapse").show()}},activeThreads:{find:function(){switch(m.activeTalk.value){case 0:c.activeThreads.hidden();break;case 1:c.activeThreads.sidebar();break;default:break}},hidden:function(){$(".widget-container.widget-container--margin-top").children().remove()},sidebar:function(){var u=$(".sidebar__navigation").last();if($(".widget-container.widget-container--margin-top").length===0){return}var v=$("<ul/>").addClass("sidebar__navigation");$.each($(".table__row-inner-wrap"),function(z,x){var y=$(x);var A=y.find(".table__column--width-fill").first();var w=A.find("h3").find("a");v.append(o.makeSideLink(w.attr("href"),w.html(),y.find(".table__column--width-small").find("a").html(),"by "+A.find("a").last().html()))});$("<h3/>").addClass("sidebar__heading").html("Active Discussions").insertAfter(u).after(v);c.activeThreads.hidden()}}},r={collapseDiscussion:function(){if(!(m.collapsed.value&2)||!~location.href.indexOf("/discussion/")){return}var u=o.fromQuery("page");if(u&&u>1){$(".comment__collapse-button").first().trigger("click")}},collapseTrade:function(){if(!(m.collapsed.value&1)||!~location.href.indexOf("/trade/")){return}var u=o.fromQuery("page");if(u&&u>1){$(".comment__collapse-button").first().trigger("click")}},injectTimes:function(u){if(!~location.href.indexOf("/discussion/")&&!~location.href.indexOf("/trade/")){return}$.each(u.find(".comment__actions"),function(x,y){var B=$($(y).children().first().children()[1]);if(B.length){var z,A=B.attr("title").replace(/Edited:/,""),w=A.match(/(\w+ \d+, \d{4}|Yesterday|Today), (\d+):(\d{2})(am|pm)/i);
if(w[1]==="Today"||w[1]==="Yesterday"){z=new Date();if(w[1]==="Yesterday"){z.setDate(z.getDate()-1)}}else{z=new Date(w[1])}z.setHours(+w[2]+((+w[2]<12&&w[4]=="pm")?12:0)-(+w[2]==12&&w[4]=="am"?12:0),+w[3],0,0);h.debug(A+"-->"+z.toString());var D,v,C=Math.floor((new Date()-z)/1000);var v=Math.floor(C/31622400);if(v>1){D=v+" year"}else{v=Math.floor(C/2678400);if(v>1){D=v+" month"}else{v=Math.floor(C/86400);if(v>=1){D=v+" day"}else{v=Math.floor(C/3600);if(v>=1){D=v+" hour"}else{v=Math.floor(C/60);if(v>=1){D=v+" minute"}else{D=C+" second"}}}}}B.html(" <strong>*Edited: "+D+(v==1?"":"s")+" ago</strong>")}})},tracking:{all:function(u){if((m.tracking.value&2)&&~location.pathname.indexOf("/discussions")){r.tracking.lists("discuss")}if((m.tracking.value&1)&&~location.pathname.indexOf("/trades")){r.tracking.lists("trade")}if((m.tracking.value&2)&&~location.pathname.indexOf("/discussion/")){r.tracking.posts("discuss",u)}if((m.tracking.value&1)&&~location.pathname.indexOf("/trade/")){r.tracking.posts("trade",u)}},lists:function(v){var u=$(".table__row-outer-wrap");h.debug("Found "+u.length+" rows");$.each(u,function(y,B){var A=$(B).find(".table__column--width-small").find("a");var x=A.attr("href").indexOf("/",1)+1;var w=A.attr("href").substring(x,x+5);var z="Unread";if(b[v][w]){z="+"+(+(A.text().replace(/,/g,""))-b[v][w].length)}if(z!="+0"){A.append(" <span class='icon-green'>("+z+")</span>")}})},posts:function(y,x){var u=location.href.split("/")[4];if(!b[y][u]){b[y][u]=[]}h.debug("Looking for unread posts in "+u);var w=0;var v=x.find(".comment");$.each(v,function(A,D){var z=$(D).find(".comment__summary").first();var C=z.attr("id");if(C&&!~b[y][u].indexOf(C)){b[y][u].push(C);var B=z.find(".comment__actions").find("span");B.addClass("icon-green").attr("title","New "+B.attr("title"));w++}});h.info("Found "+w+" unread posts");GM_setValue("tracks["+y+"]",JSON.stringify(b[y]))}}},l={profileHover:function(v,u){i.hover(true,v,u)},tagging:{show:function(v,u){if(~location.pathname.indexOf("/user/")){return}if(!u){GM_addStyle(".user__tagged{ text-decoration: none; border-radius: 4px; padding: 2px 4px; margin-left: .5em; background-color: rgba(0,0,0,.01);   text-shadow: none; box-shadow: 1px 1px 1px rgba(0,0,0,0.5) inset, -1px -1px 1px rgba(255,255,255,0.5) inset; } ")}$.each(Object.keys(k.users),function(w,x){v.find("a[href='/user/"+x+"']").not(".global__image-outer-wrap").append($("<span/>").addClass("user__tagged").html("<i class='fa fa-tag fa-flip-horizontal'></i> "+k.users[x]))})},injectEditor:function(u,v){if(!~location.pathname.indexOf("/user/")&&!v){return}if(~u.indexOf("/user/")){u=u.substring(6)}if(u==$(".nav__avatar-outer-wrap").attr("href").substring(6)){return}i.editor(v,"user","users",u)}},listIndication:function(z,x){if(!m.userLists.value||~location.pathname.indexOf("/user/")){return}if(!x){var y=m.userLists.sub.settings.userWhite.value.Foreground||"#2A2",w=m.userLists.sub.settings.userWhite.value.Background||"#FFF",v=m.userLists.sub.settings.userBlack.value.Foreground||"#C55",u=m.userLists.sub.settings.userBlack.value.Background||"#000";
if(!~y.indexOf("#")){y="#"+y}if(!~w.indexOf("#")){w="#"+w}if(!~v.indexOf("#")){v="#"+v}if(!~u.indexOf("#")){u="#"+u}GM_addStyle("a.user__whitened{ background-color: "+w+"; color: "+y+" !important; border-radius: 4px; padding: 3px 5px; text-shadow: none; } a.user__blackened{ background-color: "+u+"; color: "+v+" !important; border-radius: 4px; padding: 3px 5px; text-shadow: none; } ")}o.listingPit.getList("white",function(A){h.info("Applying white to "+A.length+" users");$.each(A,function(C,B){z.find("a[href='"+B+"']").not(".global__image-outer-wrap").addClass("user__whitened").attr("title","Whitelisted user").prepend("<i class='fa fa-star-o'></i> ")})});o.listingPit.getList("black",function(A){h.info("Applying black to "+A.length+" users");$.each(A,function(B,C){z.find("a[href='"+C+"']").not(".global__image-outer-wrap").addClass("user__blackened").attr("title","Blacklisted user").prepend("<i class='fa fa-ban'></i> ")})})},listenForLists:function(u,v){if(u.indexOf("/user/")!==0){u="/user/"+u}$(".sidebar__shortcut__whitelist").on("click",function(){o.listingPit.invalidateList("white");o.listingPit.getList("black",function(y){if(y.indexOf(u)>-1){o.listingPit.invalidateList("black")}});if(v){var w="a[href='"+u+"']",x=$(w).not(".global__image-outer-wrap").not($(".hover-panel__outer-wrap").find(w));x.attr("title","").removeClass("user__blackened").toggleClass("user__whitened").find("i").not(".fa-tag").remove();if(x.hasClass("user__whitened")){x.attr("title","Whitelisted user").prepend("<i class='fa fa-star-o'></i> ")}}});$(".sidebar__shortcut__blacklist").on("click",function(){o.listingPit.invalidateList("black");o.listingPit.getList("white",function(y){if(y.indexOf(u)>-1){o.listingPit.invalidateList("white")}});if(v){var w="a[href='"+u+"']";var x=$(w).not(".global__image-outer-wrap").not($(".hover-panel__outer-wrap").find(w));x.attr("title","").removeClass("user__whitened").toggleClass("user__blackened").find("i").not(".fa-tag").remove();if(x.hasClass("user__blackened")){x.attr("title","Blacklisted user").prepend("<i class='fa fa-ban'></i> ")}}})}},s={profileHover:function(v,u){i.hover(false,v,true)},tagging:{show:function(){if(~location.pathname.indexOf("/group/")){return}GM_addStyle(".group__tagged{ text-decoration: none; border-radius: 4px; padding: 2px 4px; margin-left: .5em; background-color: rgba(0,0,0,.01);   text-shadow: none; box-shadow: 1px 1px 1px rgba(0,0,0,0.5) inset, -1px -1px 1px rgba(255,255,255,0.5) inset; } ");$.each(Object.keys(k.groups),function(u,v){t.find("a[href='/group/"+v+"']").not(".global__image-outer-wrap").append($("<span/>").addClass("group__tagged").html("<i class='fa fa-tag fa-flip-horizontal'></i> "+k.groups[v]))})},injectEditor:function(v,u){if(!~location.pathname.indexOf("/group/")&&!u){return}if(~v.indexOf("/group/")){v=v.substring(6)}i.editor(u,"group","groups",v)}}},i={hover:function(F,z,w){if(!m.hoverInfo.value){return}var A=64,y=5;var v=360,D=160;if(!w){GM_addStyle(".hover-panel__outer-wrap{ position: absolute; width: "+v+"px; height: "+D+"px; color: #21262f; } .hover-panel__inner-wrap{ position: relative; width:100%; height: 100%; } .hover-panel__image{ position: absolute; top: 0; left: 0; width: "+A+"px; height: "+A+"px;   border-radius: 5px; } .hover-panel__corner{ position: absolute; top: "+(A+y)+"px; bottom: 0; left: 0; right: "+(v-(A+y))+"px;   padding: 5px; background-color: #465670; border-radius: 3px 0 0 3px; } .hover-panel__corner .hover-panel__icon-load{ font-size: 5em; color: rgba(255,255,255,0.6); } .hover-panel__corner .sidebar__shortcut-inner-wrap{ display: block; } .hover-panel__corner .sidebar__shortcut__whitelist{ margin: 0 0 5px 0; }.hover-panel__stats{ position: absolute; top: 0; bottom: 0; left: "+(A+y)+"px; right: 0;   padding: 5px; background-color: #465670; border-radius: 3px 3px 3px 0; } .hover-panel__stats .featured__heading__medium{ font-size: 16px; } .hover-panel__stats .featured__heading{ margin-bottom: 0; } .hover-panel__stats .featured__table__column{ margin: 0; } ")
}var u=f.hoverOuter;if(u==null){var u=$("<div/>").addClass("global__image-outer-wrap hover-panel__outer-wrap").appendTo($("body")).hide();f.hoverOuter=u;var x=$("<div/>").addClass("hover-panel__inner-wrap").appendTo(u);$("<a/>").addClass("hover-panel__link").append($("<div/>").addClass("hover-panel__image")).appendTo(x);$("<div/>").addClass("hover-panel__corner").appendTo(x);$("<div/>").addClass("hover-panel__stats").appendTo(x)}var C,B=null,E=z.find(".global__image-outer-wrap--avatar-small").not(".global__image-outer-wrap--missing-image").children();$.each(E,function(G,I){var H=$(I);if((F&&!~H.parent().attr("href").indexOf("/user/"))||(!F&&!~H.parent().attr("href").indexOf("/group/"))){return}H.hover(function(J){var K=$(this);if(C){window.clearTimeout(C);C=null}C=window.setTimeout(function(){var P=K.parent();if(P.attr("href")!=B){var Q=u.find(".hover-panel__link"),N=u.find(".hover-panel__stats"),O=u.find(".hover-panel__corner");Q.attr("href",P.attr("href"));Q.find("div").css("background-image",K.css("background-image"));o.applyGradients(N.html(""),"#515763 0%, #2f3540 100%");o.applyGradients(O.html($("<i/>").addClass("hover-panel__icon-load fa fa-spin fa-circle-o-notch")),"#424751 0%, #2f3540 100%");$.ajax({method:"GET",url:P.attr("href")}).done(function(X){var U=$(X);B=P.attr("href");var aa=U.find(".sidebar__suspension-time"),R=$("<div/>").addClass("featured__table__row__left").html(U.find(".featured__heading"));if(aa.length){R.find(".featured__heading__medium").css("color","#000").attr("title","Suspension length: "+aa.text())}var S=U.find(".featured__outer-wrap--user").css("background-color"),ab=U.find(".featured__table__row__right").find("a").css("color"),T=U.find(".sidebar__shortcut-inner-wrap");if(ab==null){var Z=S.substring(4,S.length-1).split(", ");for(var W=0;W<Z.length;W++){Z[W]=(+Z[W]+30)*3;if(Z[W]>255){Z[W]=255}}ab="rgb("+Z.join()+")"}T.find(".js__submit-form-inner").remove();T.find("a").remove();O.html(T);o.applyGradients(O,ab+" -120%, "+S+" 65%");N.append(U.find(".featured__table__column").last().prepend($("<div/>").addClass("featured__table__row").css("padding-top","0").append(R).append(F?U.find(".featured__table__column").first().find(".featured__table__row__right")[2]:null)));o.applyGradients(N,ab+" -20%, "+S+" 80%");if(F){var V=P.attr("href");l.listenForLists(V,true);l.tagging.injectEditor(V,true)}else{var Y=P.attr("href").substring(7);s.tagging.injectEditor(Y,true)}})}else{l.listenForLists(B,true)}var L=$(J.target);var M=0;if((L.offset().left+v)>window.innerWidth){M=J.target.offsetWidth-v}u.show().css("left",L.offset().left-1-parseInt(P.css("padding-left"))+M).css("top",L.offset().top-1-parseInt(P.css("padding-top")))},250)},function(){window.clearTimeout(C)})});$(".hover-panel__outer-wrap").on("mouseleave",function(){u.hide();$(".sidebar__shortcut__whitelist").off("click");$(".sidebar__shortcut__blacklist").off("click")})},editor:function(y,z,x,w){var u=k[x][w]||"Add Tag",v="<i class='fa fa-tag fa-flip-horizontal' style='font-size: 14px;'></i> ";
$("<div/>").attr("href","#").html("<a>"+v+u+"</a>").css("color",$(".featured__table__row__right").find("a").css("color")||$(".featured__table__row__right").css("color")).on("click",function(B){var A=$(this);if(A.children("input").length){return}A.html("<input type='text' placeholder='Custom Tag' value='"+(k[x][w]||"")+"' maxlength='16' />").on("keypress",function(D){var E=$(this),C=D.which||D.keyCode;if(C==13){var F=$(this).children("input").val();A.html("<a>"+v+(F||"Add Tag")+"</a>");$("a[href='/"+z+"/"+w+"']").find("."+z+"__tagged").remove();if(F){k[x][w]=F;if(y){$("a[href='/"+z+"/"+w+"']").not(".global__image-outer-wrap").append($("<span/>").addClass(z+"__tagged").html("<i class='fa fa-tag fa-flip-horizontal'></i> "+k[x][w]));$(".hover-panel__outer-wrap").find("."+z+"__tagged").remove()}}else{delete k[x][w]}GM_setValue(z+"Tags",JSON.stringify(k[x]));E.off("keypress")}else{if(C==27){A.html("<a>"+v+(k[x][w]||"Add Tag")+"</a>");E.off("keypress")}}});A.find("input").select().focus().on("blur",function(){A.html("<a>"+v+u+"</a>");$(this).parent().off("keypress")})}).insertAfter((y?".hover-panel__outer-wrap ":"")+".featured__heading__medium")}};pointless={kccode:function(){GM_addStyle("*{ direction: rtl; } ");$(".fa").addClass("fa-spin")}};(function(){try{q.injectPage();q.injectMenu();q.invalidateOnSync();a.header();a.sidebar();a.footer();d.trade();d.threads();d.thanks();d.giveaways();d.points();c.injectFlags.all(t);c.injectChance(t);c.injectSearch(t);c.injectNavSearch();c.hideEntered(t);c.easyHide(t);c.gridForm(t);c.activeThreads.find();j.removeMyGA();j.injectSGTools();r.injectTimes(t);r.tracking.all(t);l.profileHover(t);l.tagging.show(t);l.tagging.injectEditor($(".featured__heading__medium").text());l.listIndication(t);l.listenForLists($(".featured__heading__medium").text());s.profileHover(t);s.tagging.show();s.tagging.injectEditor(location.pathname.substring(location.pathname.indexOf("/group/")+7));window.setTimeout(function(){t.scroll();c.bulkFeatured.find();r.collapseDiscussion();r.collapseTrade()},100)}catch(u){h.warn(u)}})();var e=[38,38,40,40,37,39,37,39,98,97],g=0;t.on("keypress",function(u){if(u.keyCode==e[g]||u.which==e[g]){if(++g==e.length){console.log("[RIBBIT] - Command received - Iniitiating sequence..");pointless.kccode()}}else{g=0}});console.log("[RIBBIT] - SGT Mode Activated!")})();