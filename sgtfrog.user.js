/*!
// ==UserScript==
// @name         SteamGifts Tinkerer, Featuring Refined Ostensible Gain
// @namespace    https://github.com/bberenz/sgtfrog
// @description  SteamGifts.com user controlled enchancements
// @icon         https://raw.githubusercontent.com/bberenz/sgtfrog/master/keroro.gif
// @include      *://*.steamgifts.com/*
// @version      0.6.6
// @downloadURL  https://raw.githubusercontent.com/bberenz/sgtfrog/master/sgtfrog.user.js
// @updateURL    https://raw.githubusercontent.com/bberenz/sgtfrog/master/sgtfrog.meta.js
// @require      https://code.jquery.com/jquery-1.12.3.min.js
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// ==/UserScript==
*/
(function(){var r=$(document);if($(".nav__sits").length){console.warn("[RIBBIT] User is not logged in, cannot run script.");throw new Error("No lilypad.")}var l={fixedElms:{value:GM_getValue("fixedElms",6),set:{type:"square",opt:["Header","Sidebar","Footer"]},query:"Set fixed elements:"},loadLists:{value:GM_getValue("loadLists",15),set:{type:"square",opt:["Giveaways","Discussions","Trades","Comments"]},query:"Continuously load:"},gridView:{value:GM_getValue("gridView",0),set:{type:"circle",opt:["Yes","No"]},query:"Show giveaways in a grid view?"},featuredGA:{value:GM_getValue("featuredGA",2),set:{type:"circle",opt:["Yes","Expanded","No"]},query:"Show featured giveaways section?"},hideEntry:{value:GM_getValue("hideEntry",1),set:{type:"circle",opt:["Yes","No"]},query:"Hide entered giveaways?"},oneHide:{value:GM_getValue("oneHide",0),set:{type:"circle",opt:["Yes","No"]},query:"Skip confirmation when hiding games?"},winPercent:{value:GM_getValue("winPercent",1),set:{type:"circle",opt:["Yes","No"]},query:"Show giveaway win percentage?"},searchSame:{value:GM_getValue("searchSame",1),set:{type:"circle",opt:["Yes","No"]},query:"Show buttons to quickly search for similar giveaways?"},newBadges:{value:GM_getValue("newBadges",1),set:{type:"circle",opt:["Yes","No"]},query:"Show additional giveaway badges?"},colorBadge:{value:GM_getValue("colorBadge",1),set:{type:"circle",opt:["Yes","No"]},query:"Recolor standard giveaway badges?"},searchNav:{value:GM_getValue("searchNav",0),set:{type:"circle",opt:["Yes","No"]},query:"Show the giveaway search bar in the top navigation?"},pointInvl:{value:GM_getValue("pointInvl",0),set:{type:"number",opt:["Seconds"],about:"Value in seconds, enter 0 to disable."},query:"Regularly update header values (points, messages, etc.)?"},sideMine:{value:GM_getValue("sideMine",0),set:{type:"circle",opt:["Yes","No"]},query:"Hide 'My Giveaways' in the sidebar? (Still available under nav dropdown)"},activeTalk:{value:GM_getValue("activeTalk",2),set:{type:"circle",opt:["Yes","Sidebar","No"]},query:"Show the 'Active Discussions' section?"},collapsed:{value:GM_getValue("collapsed",3),set:{type:"square",opt:["Discussions","Trades"]},query:"After first page, collapse original post:"},tracking:{value:GM_getValue("tracking",0),set:{type:"square",opt:["Discussions","Trades"]},query:"Track read comments and topics:"},userTools:{value:GM_getValue("userTools",1),set:{type:"circle",opt:["Yes","No"]},query:"Show SGTools links on user pages?"},userDetail:{value:GM_getValue("userDetail",1),set:{type:"circle",opt:["Yes","No"]},query:"Show user details on avatar hover?"},userLists:{value:GM_getValue("userLists",1),set:{type:"circle",opt:["Yes","No"]},query:"Label black-/white- listed users?",sub:{name:"Configure",settings:{userWhite:{value:JSON.parse(GM_getValue("userWhite",'{"Foreground": "", "Background": ""}')),set:{type:"text",opt:["Foreground","Background"],about:"Enter value as hexadecimal color, leave blank for defaults."},query:"Whitelisted label colors:"},userBlack:{value:JSON.parse(GM_getValue("userBlack",'{"Foreground": "", "Background": ""}')),set:{type:"text",opt:["Foreground","Background"],about:"Enter value as hexadecimal color, leave blank for defaults."},query:"Blacklisted label colors:"}}}}};
var j={users:JSON.parse(GM_getValue("userTags","{}")),groups:JSON.parse(GM_getValue("groupTags","{}"))};var b={discuss:JSON.parse(GM_getValue("tracks[discuss]","{}")),trade:JSON.parse(GM_getValue("tracks[trade]","{}"))};var m=-2,g={debug:function(s){if(m<-1){console.debug("[SGT DEBUG] ",s)}},info:function(s){if(m<0){console.log("[SGT INFO] ",s)}},warn:function(s){if(m<0){console.warn("[SGT WARN] ",s)}},alert:function(s){console.log("[SGT ALERT] ",s)}},n={fromQuery:function(u){var t,s={},w=/([^&=]+)=?([^&]*)/g,v=function(x){return decodeURIComponent(x.replace(/\+/g," "))};while(t=w.exec(location.search.substring(1))){s[v(t[1])]=v(t[2])}return s[u]},isGAlist:function(){return !(~location.href.indexOf("/trade")||~location.href.indexOf("/discussion")||~location.href.indexOf("/giveaway/")||~location.href.indexOf("/account/")||~location.href.indexOf("/archive")||~location.href.indexOf("/settings"))},listingPit:{cache:{wishes:{name:"cache-wish",page:"/account/steam/wishlist/search?page=",touches:".table__column__secondary-link",list:null},white:{name:"cache-white",page:"/account/manage/whitelist/search?page=",touches:".table__column__heading",list:null},black:{name:"cache-black",page:"/account/manage/blacklist/search?page=",touches:".table__column__heading",list:null}},getList:function(t,v){g.debug("Pulling list for "+t);var s=n.listingPit.cache[t];if(!s.list){var u=JSON.parse(GM_getValue(s.name,null));if(u==null){g.debug("Entering hell..");n.listingPit.callbackHell(s.page,1,s.touches,function(w){GM_setValue(s.name,JSON.stringify(w));GM_setValue(s.name+"-time",Date.now());s.list=w;v(w)})}else{g.debug("Had it saved..");s.list=u;v(u)}}else{g.debug("Already loaded..");v(s.list)}},invalidateList:function(s){g.debug("Invalidating "+s);GM_setValue(n.listingPit.cache[s].name,null)},callbackHell:function(t,v,u,s){$.ajax({method:"GET",url:t+v}).done(function(z){var x=$(z),y=x.find(".pagination__navigation").children().last().attr("data-page-number");var w=[];$.each(x.find(u),function(A,B){w.push($(B).attr("href"))});if(v<y){g.debug("Going deeper..");n.listingPit.callbackHell(t,++v,u,function(A){s($.merge(w,A))})}else{s(w)}})}},makeSideLink:function(t,s,v,u){var y=$("<li/>").addClass("sidebar__navigation__item");var w=$("<a/>").addClass("sidebar__navigation__item__link").attr("href",t).appendTo(y);var x=$("<div/>").addClass("sidebar__navigation__item__name").html(s).appendTo(w);if(u!==undefined){$("<div/>").addClass("sidebar__navigation__item__count").html(u).appendTo(x)}$("<div/>").addClass("sidebar__navigation__item__underline").appendTo(w);if(v!==undefined){$("<div/>").addClass("sidebar__navigation__item__count").html(v).appendTo(w)}return y},makeTopLink:function(v,u,y,w,t){var x=$("<a/>").addClass("nav__row").attr("href",v);$("<i/>").addClass("icon-"+t).addClass("fa fa-fw fa-"+w).appendTo(x);var s=$("<div/>").addClass("nav__row__summary").appendTo(x);$("<p/>").addClass("nav__row__summary__name").html(u).appendTo(s);$("<p/>").addClass("nav__row__summary__description").html(y).appendTo(s);
return x},settings:{makeRow:function(B,u,A,s){var x;switch(s.set.type){case"circle":x=n.settings.makeRadio(u,A,s);break;case"square":x=n.settings.makeCheck(u,A,s);break;case"number":case"text":x=n.settings.makeText(u,A,s);break;default:g.warn("Cannot determine options type: "+s.set.type);return}B.append(x);if(s.sub){x.find(".form__checkbox").last().after($("<div/>").addClass("form__checkbox is-selected").append($("<a/>").html(s.sub.name)).on("click",function(C){$("#sub_"+A).toggle();C.stopImmediatePropagation()}));var y="abcde";var w=$("<div/>").attr("id","sub_"+A).css("display","none").appendTo(B);var z=Object.keys(s.sub.settings);for(var v=0;v<z.length;v++){var t=z[v];if(s.sub.settings.hasOwnProperty(t)){n.settings.makeRow(w,u+y.substring(v,v+1),t,s.sub.settings[t])}}}},makeHeading:function(u,t){var s=$("<div/>").addClass("form__row");$("<div/>").addClass("form__heading").append($("<div/>").addClass("form__heading__number").html(u+".")).append($("<div/>").addClass("form__heading__text").html(t)).appendTo(s);return s},makeRadio:function(w,v,u){var y=$("<div/>").append($("<input/>").attr("type","hidden").attr("name",v).val(u.value));for(var t=0;t<u.set.opt.length;t++){var x=u.set.opt.length-1-t;var s=$("<div/>").addClass("form__checkbox").attr("data-checkbox-value",x).append("<i class='form__checkbox__default fa fa-circle-o'></i>").append("<i class='form__checkbox__hover fa fa-circle'></i>").append("<i class='form__checkbox__selected fa fa-check-circle'></i>").append(u.set.opt[t]);if(u.value==x){s.addClass("is-selected")}else{s.addClass("is-disabled")}y.append(s)}return n.settings.makeHeading(w,u.query).append($("<div/>").addClass("form__row__indent").append(y))},makeCheck:function(v,u,t){var y=$("<div/>").append($("<input/>").attr("type","hidden").attr("name",u).val(t.value));for(var s=0;s<t.set.opt.length;s++){var x=Math.pow(2,t.set.opt.length-1-s);var w=$("<div/>").addClass("form__checkbox").attr("data-checkbox-value",x).append("<i class='form__checkbox__default fa fa-square-o'></i>").append("<i class='form__checkbox__hover fa fa-square'></i>").append("<i class='form__checkbox__selected fa fa-check-square'></i>").append(t.set.opt[s]).on("click",function(z){var A=$(this),B=A.siblings("input");B.val(B.val()^A.attr("data-checkbox-value"));if(B.val()&A.attr("data-checkbox-value")){A.removeClass("is-disabled").addClass("is-selected")}else{A.addClass("is-disabled").removeClass("is-selected")}z.stopImmediatePropagation()});if(t.value&x){w.addClass("is-selected")}else{w.addClass("is-disabled")}y.append(w)}return n.settings.makeHeading(v,t.query).append($("<div/>").addClass("form__row__indent").append(y))},makeText:function(w,v,t){var s=$("<div/>").addClass("form__row__indent");$.each(t.set.opt,function(y,x){var A=t.value,z="";if(t.set.opt.length>1){A=t.value[x];z="_"+y}s.append($("<input/>").attr("type",t.set.type).attr("name",v+z).attr("placeholder",x).addClass("form__input-small").val(A))});var u=$("<div/>").addClass("form__input-description").html(t.set.about);
return n.settings.makeHeading(w,t.query).append(s.append(u))}},applyGradients:function(t,s){t.css("background-image","linear-gradient("+s+")").css("background-image","-moz-linear-gradient("+s+")").css("background-image","-webkit-linear-gradient("+s+")")}},o={invalidateOnSync:function(){if(!l.newBadges.value||!~location.href.indexOf("/profile/sync")){return}$(".form__sync-default").on("click",function(){n.listingPit.invalidateList("wishes")})},injectMenu:function(u){g.debug("Adding custom navigation");var t=$("<div/>").addClass("nav__button-container");$("<a/>").addClass("nav__button nav__buton--is-dropdown").attr("href","/ąccount/settings/ribbit").html("SGT frog").appendTo(t);$("<div/>").addClass("nav__button nav__button--is-dropdown-arrow").html("<i class='fa fa-angle-down'></i>").appendTo(t).on("click",function(x){var w=$(this).hasClass("is-selected");$("nav .nav__button").removeClass("is-selected"),$("nav .nav__relative-dropdown").addClass("is-hidden"),w||$(this).addClass("is-selected").siblings(".nav__relative-dropdown").removeClass("is-hidden"),x.stopImmediatePropagation()});var v=$("<div/>").addClass("nav__relative-dropdown is-hidden").appendTo(t);$("<div/>").addClass("nav__absolute-dropdown").append(n.makeTopLink("/ąccount/settings/ribbit","Settings","Adjust tool functionality.","gears","grey")).append(n.makeTopLink("https://github.com/bberenz/sgtfrog/issues","Feedback","Report an issue or request a feature.","github","green")).append(n.makeTopLink("https://www.steamgifts.com/discussion/4C3Cl/userscript-steamgifts-tinkerer-featuring-refined-ostensible-gain","Discussion","View the SteamGifts discussion thread.","square-o","blue")).appendTo(v);$(".nav__right-container").find(".nav__button-container:not(.nav__button-container--notification)").last().before(t);var s=n.makeSideLink("/ąccount/settings/ribbit","SGT frog");$(".sidebar__navigation").find("a[href='/account/settings/sales']").parent().after(s);if(u){s.addClass("is-selected");s.find(".sidebar__navigation__item__name").before("<i class='fa fa-caret-right'></i>")}},injectPage:function(){if(location.pathname==="/%C4%85ccount/settings/ribbit"){g.info("Creating custom settings page");GM_addStyle("body{ background-image: none; background-color: #95A4C0; }");var s=$("style").detach();$("html").empty();$.ajax({method:"GET",url:"/account/settings/sales"}).done(function(y){var w=y.substring(y.indexOf("<head>")+6,y.indexOf("</head>")).replace(/<script [\s\S]+?<\/script>/g,"");$("<head/>").appendTo("html").append(w).append("<script src='https://cdn.steamgifts.com/js/minified.js'><\/script>");$("<body/>").appendTo("html").append(y.substring(y.indexOf("<body>")+6,y.indexOf("</body>")));s.appendTo("html");$(".page__heading__breadcrumbs").children("a").last().html("Sgt Frog").attr("href","/ąccount/settings/ribbit");$(".sidebar__navigation").find("a[href='/account/settings/sales']").parent().removeClass("is-selected").find("i").remove();$("title").html("Account - Settings - Ribbit");var u=$(".form__rows");
u.empty();var x=Object.keys(l);for(var v=0;v<x.length;v++){var t=x[v];if(l.hasOwnProperty(t)){n.settings.makeRow(u,v+1,t,l[t])}}$("<div/>").addClass("form__submit-button").html("<i class='fa fa-arrow-circle-right'></i> Save Changes").on("click",function(){o.save(l)}).appendTo(u);g.debug("Creation complete");window.setTimeout(function(){o.injectMenu(true);c.injectNavSearch();a.header();a.sidebar();a.footer();r.scroll()},500)})}},save:function(y){var w=function(B,C){g.debug("Setting "+B+" to "+C);GM_setValue(B,C)};var A=Object.keys(y);for(var v=0;v<A.length;v++){var t=A[v];if(y.hasOwnProperty(t)){if(y[t].set.type=="text"&&y[t].set.opt.length>1){var z={};for(var u=0;u<y[t].set.opt.length;u++){var s=$("input[name='"+t+"_"+u+"']");z[y[t].set.opt[u]]=s.val()}w(t,JSON.stringify(z))}else{var x=$("input[name='"+t+"']");w(t,+x.val())}if(y[t].sub){o.save(y[t].sub.settings)}}}g.info("Saved new settings");window.scrollTo(0,0);location.reload()}},a={header:function(){if(!(l.fixedElms.value&4)){return}GM_addStyle("header.fixed{ position: fixed; top: 0; width: 100%; z-index: 100; } .left-above{ margin-top: 39px !important; }");$("header").addClass("fixed");var s=$(".featured__container");if(s.length>0){s.addClass("left-above")}else{$(".page__outer-wrap").addClass("left-above")}},sidebar:function(){if(!(l.fixedElms.value&2)){return}var v=l.fixedElms.value&4?64:25;GM_addStyle(".sidebar .fixed{ position: fixed; top: "+v+"px; }");var t=$(".sidebar"),s=$("<div/>").addClass("sidebar__outer-wrap"),u=$(".sidebar__mpu");t.children().detach().appendTo(s);s.appendTo(t);r.on("scroll",function(){var w=$(".featured__container").height()+64;if(r.scrollTop()>(w-v)){t.children().addClass("fixed");u.hide()}else{t.children().removeClass("fixed");u.show()}});s.css("width",t.css("min-width")).css("min-width",t.css("min-width")).css("max-width",t.css("max-width"))},footer:function(){if(!(l.fixedElms.value&1)){return}GM_addStyle(".footer__outer-wrap.fixed{ position: fixed; bottom: 0; width: 100%;   background-color: #95a4c0; z-index: 100; } .left-below{ margin-bottom: 45px; }");$(".footer__outer-wrap").addClass("fixed");$(".page__outer-wrap").addClass("left-below")}},d={addSpinner:function(s){s.after($("<div/>").addClass("pagination__loader").html("<i class='fa fa-spin fa-circle-o-notch'></i>"))},removeSpinner:function(){$(".pagination__loader").remove()},everyNew:function(s){c.injectFlags.wishlist(s,true);c.injectFlags.recent(s,true);c.injectChance(s);c.injectSearch(s,true);c.hideEntered(s);c.easyHide(s);c.gridForm(s,true);k.profileHover(s,true);k.tagging.show(s,true);k.listIndication(s,true)},giveaways:function(){if(!(l.loadLists.value&8)||!n.isGAlist()){return}GM_addStyle(".pagination__loader{ text-align: center; margin-top: 1em; } .pagination__loader .fa{ font-size: 2em; } ");var t=n.fromQuery("page");if(t==undefined){t=1}$(".widget-container").find(".page__heading").first().after($(".pagination").detach());var s=false;r.on("scroll",function(){var u=(r.scrollTop()+$(window).height())/r.height();
if(u>=0.9&&!s){s=true;t++;var v=location.href;if(~v.indexOf("?")){v=v.replace(/page=\d+?&?/,"")}else{if(location.pathname.length==1){v+="/giveaways"}v+="/search?"}g.info("Loading next page: "+t);d.addSpinner($(".giveaway__row-outer-wrap").last());g.debug(v+"&page="+t);$.ajax({method:"GET",url:v+"&page="+t}).done(function(B){var y=$(B);d.everyNew(y);y.find(".pinned-giveaways__outer-wrap").remove();var A=y.find(".giveaway__row-outer-wrap").detach();var z=y.find(".pagination");var x=z.find(".pagination__navigation");if(A.length===0||(~location.href.indexOf("/group/")&&x.children().last().text().trim()!=="Last")){g.info("No more giveaways");d.removeSpinner();var w=x.children().last().attr("data-page-number");if(!w||t-1==w){return}}x.html("Page "+t);$(".giveaway__row-outer-wrap").last().parent().append(z).append(A);s=false;d.removeSpinner()})}})},trade:function(){if(!(l.loadLists.value&2)||!~location.href.indexOf("/trade/")){return}d.comments()},threads:function(){if(!(l.loadLists.value&4)||!~location.href.indexOf("/discussion/")){return}d.comments()},thanks:function(){if(!(l.loadLists.value&1)||!~location.href.indexOf("/giveaway/")){return}d.comments()},comments:function(){GM_addStyle(".pagination__loader{ text-align: center; margin-top: 1em; } .pagination__loader .fa{ font-size: 2em; } ");var u=n.fromQuery("page");if(u==undefined){u=1}var t=$(".pagination__navigation").children().last().attr("data-page-number");$(".page__heading").last().after($(".pagination").detach());var s=false;r.on("scroll",function(){var v=(r.scrollTop()+$(window).height())/r.height();if(v>=0.9&&!s){s=true;if(u++<t){var w=location.href;if(~w.indexOf("?")){w=w.replace(/page=\d+?&?/,"")}else{w+="/search?"}d.addSpinner($(".comments").last());g.info("Loading next page: "+u+"/"+t);g.debug(w+"&page="+u);$.ajax({method:"GET",url:w+"&page="+u}).done(function(z){var x=$(z);k.profileHover(x,true);k.tagging.show(x,true);k.listIndication(x,true);p.injectTimes(x);p.tracking.all(x);var y=x.find(".pagination");y.find(".pagination__navigation").html("Page "+u);$(".comments").last().append(y).append(x.find(".comments").last().children().detach());s=false;d.removeSpinner()})}}})},points:function(){if(l.pointInvl.value<1||isNaN(l.pointInvl.value)){return}if(l.pointInvl.value<15){g.alert("Failed to apply defined points interval, using 15 seconds instead");l.pointInvl.value=15}window.setInterval(function(){g.debug("Pulling new header values");$.ajax({method:"GET",url:"/about/brand-assets"}).done(function(t){var s=$(t);$(".nav__points").html(s.find(".nav__points").html());var u=$(".nav__button-container--notification");$.each(s.find(".nav__button-container--notification"),function(w,v){var x=$(u[w]),y=$(v);x.html(y.html());if(y.hasClass("nav__button-container--active")){x.removeClass("nav__button-container--inactive").addClass("nav__button-container--active")}else{x.removeClass("nav__button-container--active").addClass("nav__button-container--inactive")}})})},l.pointInvl.value*1000)}},i={removeMyGA:function(){if(!l.sideMine.value){return
}var t=$(".sidebar");var s=t.find(".sidebar__heading").last();if(s.html()==="My Giveaways"){s.remove();t.find(".sidebar__navigation").last().remove()}},injectSGTools:function(){if(!l.userTools.value||!~location.pathname.indexOf("/user/")){return}var t=location.href.split("/")[4];g.debug("Found user: "+t);var s=$(".sidebar__navigation").last(),u=$("<ul/>").append(n.makeSideLink("http://www.sgtools.info/sent/"+t,"Real Value Sent").find("a").attr("target","_check"),n.makeSideLink("http://www.sgtools.info/won/"+t,"Real Value Won").find("a").attr("target","_check"),n.makeSideLink("http://www.sgtools.info/nonactivated/"+t,"Non-Activated").find("a").attr("target","_check"),n.makeSideLink("http://www.sgtools.info/multiple/"+t,"Multi Wins").find("a").attr("target","_check"));$("<h3/>").html("SG Tools").addClass("sidebar__heading").insertAfter(s).after(u.addClass("sidebar__navigation"))}},c={injectFlags:{all:function(s){if(l.newBadges.value){c.injectFlags.wishlist(s);c.injectFlags.recent(s)}if(l.colorBadge.value){c.injectFlags.invite();c.injectFlags.region();c.injectFlags.whitelist();c.injectFlags.group()}},wishlist:function(v,t){var s=$(".giveaway__row-outer-wrap");if(s.length>0){if(!t){GM_addStyle(".giveaway__column--wish{ background-image: linear-gradient(#FFFACF 0%, #FFF176 100%);   background-image: -moz-linear-gradient(#FFFACF 0%, #FFF176 100%);   background-image: -webkit-linear-gradient(#FFFACF 0%, #FFF176 100%);   border-color: #EDCCBE #F0C2AF #DEAB95 #F2C4B1 !important; color: #F57F17;   box-shadow: none !important; }")}var u=$("<div/>").addClass("giveaway__column--wish").attr("title","Wishlist");$("<i/>").addClass("fa fa-fw fa-star").appendTo(u);if(Date.now()-GM_getValue("cache-wish-time",0)>(24*60*60*1000)){n.listingPit.invalidateList("wishes")}n.listingPit.getList("wishes",function(w){g.info("Applying badges for "+w.length+" wishes");$.each(w,function(y,A){var x=v.find("a[href='"+A+"']").parent().parent();var z=x.find(".giveaway__columns--badges");if(z.length){z.prepend(u.clone())}else{x.find(".giveaway__column--width-fill").after(u.clone())}})})}},recent:function(u,s){if(!s){GM_addStyle(".giveaway__column--new{   background-image: linear-gradient(#FFE0B2 0%, #FFB74D 100%);   background-image: -moz-linear-gradient(#FFE0B2 0%, #FFB74D 100%);   background-image: -webkit-linear-gradient(#FFE0B2 0%, #FFB74D 100%);   border-color: #FFCCBC #FFAB91 #FF8A65 #FFAB91 !important; color: #BF360C;   box-shadow: none !important; }")}var t=$("<div/>").addClass("giveaway__column--new").attr("title","New");$("<i/>").addClass("fa fa-fw fa-fire").appendTo(t);$.each(u.find(".giveaway__column--width-fill").find("span"),function(v,y){var x=$(y);var w=x.html();if(~w.indexOf("second")||~w.indexOf("minute")){x.parent().parent().find(".giveaway__column--width-fill").after(t.clone())}})},invite:function(){GM_addStyle(".giveaway__column--invite-only{ background-image: linear-gradient(#FFCDD2 0%, #F49B95 100%);   background-image: -moz-linear-gradient(#FFCDD2 0%, #F49B95 100%);   background-image: -webkit-linear-gradient(#FFCDD2 0%, #F49B95 100%);   border-color: #ef9a9a #e57373 #ef5350 #e57373 !important; color: #950000; }")
},region:function(){GM_addStyle(".giveaway__column--region-restricted{ background-image: linear-gradient(#D7CCC8 0%, #A18F89 100%);   background-image: -moz-linear-gradient(#D7CCC8 0%, #A18F89 100%);   background-image: -webkit-linear-gradient(#D7CCC8 0%, #A18F89 100%);   border-color: #BDBDBD #9E9E9E #757575 #9E9E9E !important; color: #5D4037; }")},whitelist:function(){GM_addStyle(".giveaway__column--whitelist{ background-image: linear-gradient(#FFFFFF 0%, #E0E0E0 100%);   background-image: -moz-linear-gradient(#FFFFFF 0%, #E0E0E0 100%);   background-image: -webkit-linear-gradient(#FFFFFF 0%, #E0E0E0 100%);   color: #D81B60 !important; }")},group:function(){GM_addStyle(".giveaway__column--group{ background-image: linear-gradient(#DCEDC8 0%, #AED581 100%);   background-image: -moz-linear-gradient(#DCEDC8 0%, #AED581 100%);   background-image: -webkit-linear-gradient(#DCEDC8 0%, #AED581 100%); ")}},injectChance:function(t){if(!l.winPercent.value){return}var s=function(u,v){return"<i class='fa fa-bar-chart'></i> <span>"+Math.min(100,(1/u)*v*100).toFixed(3)+"% chance</span>"};$.each(t.find(".giveaway__row-outer-wrap"),function(v,A){var y=$(A);var u=y.find(".fa-tag").next().html().split(/\s/)[0].replace(/,/g,"");var x=y.find(".giveaway__columns").children().first().find("span").html().substr(0,5);if(x!=="Ended"&&!y.find(".giveaway__row-inner-wrap").hasClass("is-faded")){u++}var z=1;var B=y.find(".giveaway__heading__thin").first().html();if(B&&~B.indexOf("Copies")){z=+(B.replace(/([\(\),\s]|Copies)/g,""))}var w=$("<div/>").html(s(u,z));y.find(".giveaway__columns").children().first().after(w)});$.each(t.find(".featured__columns"),function(x,z){var w=t.find(".live__entry-count");if(!w||w.length===0){return}var u=w.html().replace(/,/g,"");var v=t.find(".sidebar__entry-insert");if(v&&v.length>0&&!v.hasClass("is-hidden")){u++}var A=1;var B=t.find(".featured__heading__small").first().html();if(~B.indexOf("Copies")){A=+(B.replace(/([\(\),\s]|Copies)/g,""))}var y=$("<div/>").addClass("featured__column").html(s(u,A));$(z).children().first().after(y)})},injectSearch:function(v,t){if(!l.searchSame.value){return}$.each(v.find(".giveaway__heading"),function(w,y){var x=$(y);$("<a/>").addClass("giveaway__icon").html("<i class='fa fa-search-plus'></i>").attr("title","Find similar giveaways").attr("href","/giveaways/search?q="+x.find(".giveaway__heading__name").html()).appendTo(x)});if(~location.href.indexOf("/giveaway/")){if(!t){GM_addStyle(".sidebar__shortcut-inner-wrap div{ padding: 0; } .sidebar__shortcut-inner-wrap .sidebar__error{ border-color: #f0d1dc #e5bccc #d9a7ba #ebbecf; }")}var s=$(".sidebar__navigation").parent();var u=s.children().first().not(".sidebar__mpu").detach();if(!u.hasClass("sidebar__error")){u.css("background-image","none").css("border","none")}else{n.applyGradients(u,"#f7edf1 0%, #e6d9de 100%")}$("<div/>").addClass("sidebar__shortcut-inner-wrap").append($("<a/>").addClass("sidebar__entry-loading").css("max-width",(u.length>0?"33%":"100%")).html("<i class='fa fa-search'></i> Find Similar").attr("href","/giveaways/search?q="+$(".featured__heading__medium").html())).append(u).appendTo($("<div/>").addClass("sidebar__shortcut-outer-wrap").prependTo(s))
}},injectNavSearch:function(){if(!l.searchNav.value){return}var s=$("<div/>").addClass("sidebar__search-container").css("margin","0 5px 0 0").css("height","inherit").append($("<input class='sidebar__search__ga-input' placeholder='Search Giveaways...' value='' type='text' />").css("padding","0").css("border","none").on("keypress",function(t){if(t.which===13){location.href="/giveaways/search?q="+$(this).val();t.stopImmediatePropagation()}})).append("<i class='fa fa-search'></i>");$(".nav__left-container").prepend(s)},hideEntered:function(s){if(!l.hideEntry.value||~location.href.indexOf("/user/")||~location.href.indexOf("/group/")){return}s.find(".is-faded").parent(".giveaway__row-outer-wrap").remove()},easyHide:function(s){if(!l.oneHide.value){return}s.find("[data-popup='popup--hide-games']").on("click",function(t){window.setTimeout(function(){$(".js__submit-hide-games").click()},100)})},gridForm:function(t,s){if(!l.gridView.value||!n.isGAlist()){return}if(!s){GM_addStyle(".pagination{ clear: both; } .giveaway__row-outer-wrap{ width: 19%; margin-right: 1%; float: left; } .giveaway__row-inner-wrap{ display: block; } .global__image-outer-wrap--game-medium{ width: initial; margin: 0 auto !important; } .giveaway__heading{ display: block; text-align: center; } .giveaway__heading:first-of-type{ height: auto; text-overflow: ellipsis; overflow: hidden; } .giveaway__columns-full{ display: block; } .giveaway__columns-full > :not(:last-child){ margin: 0 0 5px 0; } .giveaway__columns--badges{ margin-bottom: 5px; } .giveaway__columns--badges > .giveaway__column--contributor-level:not(.giveaway__column--empty){ -webkit-box-flex: 1; -moz-box-flex: 1; -webkit-flex: 1; -ms-flex: 1; flex: 1; } .giveaway__column--empty{ height: 26px; width: 0; padding: 0; margin: 0 !important; visibility: hidden; } .giveaway__links{ display: block; margin-top: 5px; } .giveaway__links a{ margin-right: 5px; } .pinned-giveaways__inner-wrap--minimized .giveaway__row-outer-wrap:nth-child(-n+5){ display: initial; } .giveaway__row--empty{ clear: both; } ")}t.find(".giveaway__columns").addClass("giveaway__columns-full");$.each(t.find(".giveaway__row-outer-wrap"),function(w,x){var u=$(x);u.find(".global__image-outer-wrap--avatar-small").remove();u.find(".giveaway__row-inner-wrap").prepend(u.find(".global__image-outer-wrap--game-medium").detach());u.find(".giveaway__summary").prepend($("<h2/>").addClass("giveaway__heading").html(u.find(".giveaway__heading__name").detach()));u.find(".giveaway__columns").before($("<div/>").addClass("giveaway__columns giveaway__columns--badges").html(u.find(".giveaway__column--width-fill").nextAll().detach()).prepend($("<div/>").addClass("giveaway__column--empty")));var v=u.find(".fa-tag").next();v.html(v.text().replace(/([\d,]+) \w+/,"$1"));v=u.find(".fa-comment").next();v.html(v.text().replace(/([\d,]+) \w+/,"$1"))});t.find(".pinned-giveaways__inner-wrap").append($("<div/>").addClass("giveaway__row--empty"))},bulkFeatured:{find:function(){switch(l.featuredGA.value){case 0:c.bulkFeatured.hidden();
break;case 1:c.bulkFeatured.expanded();break;default:c.bulkFeatured.injectCollapsable();break}},injectCollapsable:function(){if($(".pinned-giveaways__inner-wrap").children().length<3){return}GM_addStyle(".pinned-giveaways__button{ clear: both; } .pinned-giveaways__inner-wrap:not(.pinned-giveaways__inner-wrap--minimized){   border-radius: 4px 4px 0 0; margin-bottom: 0; }");$(".pinned-giveaways__button").off("click");$(".pinned-giveaways__button").addClass("pinned-giveaways__button-expand");var s=$("<div/>").hide().addClass("pinned-giveaways__button").addClass("pinned-giveaways__button-collapse").html("<i class='fa fa-angle-up'></i>").appendTo(".pinned-giveaways__outer-wrap");s.on("click",function(t){$(".pinned-giveaways__inner-wrap").addClass("pinned-giveaways__inner-wrap--minimized");$(".pinned-giveaways__button-expand").show();$(".pinned-giveaways__button-collapse").hide();t.preventDefault()});$(".pinned-giveaways__button-expand").on("click",function(){$(".pinned-giveaways__inner-wrap").removeClass("pinned-giveaways__inner-wrap--minimized");$(".pinned-giveaways__button-expand").hide();$(".pinned-giveaways__button-collapse").show()})},hidden:function(){$(".pinned-giveaways__outer-wrap").remove()},expanded:function(){c.bulkFeatured.injectCollapsable();$(".pinned-giveaways__inner-wrap").removeClass("pinned-giveaways__inner-wrap--minimized");$(".pinned-giveaways__button-expand").hide();$(".pinned-giveaways__button-collapse").show()}},activeThreads:{find:function(){switch(l.activeTalk.value){case 0:c.activeThreads.hidden();break;case 1:c.activeThreads.sidebar();break;default:break}},hidden:function(){$(".widget-container.widget-container--margin-top").children().remove()},sidebar:function(){var s=$(".sidebar__navigation").last();if($(".widget-container.widget-container--margin-top").length===0){return}var t=$("<ul/>").addClass("sidebar__navigation");$.each($(".table__row-inner-wrap"),function(x,v){var w=$(v);var y=w.find(".table__column--width-fill").first();var u=y.find("h3").find("a");t.append(n.makeSideLink(u.attr("href"),u.html(),w.find(".table__column--width-small").find("a").html(),"by "+y.find("a").last().html()))});$("<h3/>").addClass("sidebar__heading").html("Active Discussions").insertAfter(s).after(t);c.activeThreads.hidden()}}},p={collapseDiscussion:function(){if(!(l.collapsed.value&2)||!~location.href.indexOf("/discussion/")){return}var s=n.fromQuery("page");if(s&&s>1){$(".comment__collapse-button").first().trigger("click")}},collapseTrade:function(){if(!(l.collapsed.value&1)||!~location.href.indexOf("/trade/")){return}var s=n.fromQuery("page");if(s&&s>1){$(".comment__collapse-button").first().trigger("click")}},injectTimes:function(s){if(!~location.href.indexOf("/discussion/")&&!~location.href.indexOf("/trade/")){return}$.each(s.find(".comment__actions"),function(v,w){var z=$($(w).children().first().children()[1]);if(z.length){var x,y=z.attr("title").replace(/Edited:/,""),u=y.match(/(\w+ \d+, \d{4}|Yesterday|Today), (\d+):(\d{2})(am|pm)/i);
if(u[1]==="Today"||u[1]==="Yesterday"){x=new Date();if(u[1]==="Yesterday"){x.setDate(x.getDate()-1)}}else{x=new Date(u[1])}x.setHours(+u[2]+((+u[2]<12&&u[4]=="pm")?12:0)-(+u[2]==12&&u[4]=="am"?12:0),+u[3],0,0);g.debug(y+"-->"+x.toString());var B,t,A=Math.floor((new Date()-x)/1000);var t=Math.floor(A/31622400);if(t>1){B=t+" year"}else{t=Math.floor(A/2678400);if(t>1){B=t+" month"}else{t=Math.floor(A/86400);if(t>=1){B=t+" day"}else{t=Math.floor(A/3600);if(t>=1){B=t+" hour"}else{t=Math.floor(A/60);if(t>=1){B=t+" minute"}else{B=A+" second"}}}}}z.html(" <strong>*Edited: "+B+(t==1?"":"s")+" ago</strong>")}})},tracking:{all:function(s){if((l.tracking.value&2)&&~location.pathname.indexOf("/discussions")){p.tracking.lists("discuss")}if((l.tracking.value&1)&&~location.pathname.indexOf("/trades")){p.tracking.lists("trade")}if((l.tracking.value&2)&&~location.pathname.indexOf("/discussion/")){p.tracking.posts("discuss",s)}if((l.tracking.value&1)&&~location.pathname.indexOf("/trade/")){p.tracking.posts("trade",s)}},lists:function(t){var s=$(".table__row-outer-wrap");g.debug("Found "+s.length+" rows");$.each(s,function(w,z){var y=$(z).find(".table__column--width-small").find("a");var v=y.attr("href").indexOf("/",1)+1;var u=y.attr("href").substring(v,v+5);var x="Unread";if(b[t][u]){x="+"+(+(y.text().replace(/,/g,""))-b[t][u].length)}if(x!="+0"){y.append(" <span class='icon-green'>("+x+")</span>")}})},posts:function(w,v){var s=location.href.split("/")[4];if(!b[w][s]){b[w][s]=[]}g.debug("Looking for unread posts in "+s);var u=0;var t=v.find(".comment");$.each(t,function(y,B){var x=$(B).find(".comment__summary").first();var A=x.attr("id");if(A&&!~b[w][s].indexOf(A)){b[w][s].push(A);var z=x.find(".comment__actions").find("span");z.addClass("icon-green").attr("title","New "+z.attr("title"));u++}});g.info("Found "+u+" unread posts");GM_setValue("tracks["+w+"]",JSON.stringify(b[w]))}}},k={profileHover:function(y,u){if(!l.userDetail.value){return}var z=64,v=5;var t=360,F=160;if(!u){GM_addStyle(".user-panel__outer-wrap{ position: absolute; width: "+t+"px; height: "+F+"px; color: #21262f; } .user-panel__inner-wrap{ position: relative; width:100%; height: 100%; } .user-panel__image{ position: absolute; top: 0; left: 0; width: "+z+"px; height: "+z+"px;   border-radius: 5px; } .user-panel__corner{ position: absolute; top: "+(z+v)+"px; bottom: 0; left: 0; right: "+(t-(z+v))+"px;   padding: 5px; background-color: #465670; border-radius: 3px 0 0 3px; } .user-panel__corner .user-panel__icon-load{ font-size: 5em; color: rgba(255,255,255,0.6); } .user-panel__corner .sidebar__shortcut-inner-wrap{ display: block; } .user-panel__corner .sidebar__shortcut__whitelist{ margin: 0 0 5px 0; }.user-panel__stats{ position: absolute; top: 0; bottom: 0; left: "+(z+v)+"px; right: 0;   padding: 5px; background-color: #465670; border-radius: 3px 3px 3px 0; } .user-panel__stats .featured__heading__medium{ font-size: 16px; } .user-panel__stats .featured__heading{ margin-bottom: 0; } .user-panel__stats .featured__table__column{ margin: 0; } ")
}var s=$("<div/>").addClass("global__image-outer-wrap user-panel__outer-wrap").appendTo($("body")).hide();var w=$("<div/>").addClass("user-panel__inner-wrap").appendTo(s);var C=$("<a/>").addClass("user-panel__link").append($("<div/>").addClass("user-panel__image")).appendTo(w),x=$("<i/>").addClass("user-panel__icon-load fa fa-spin fa-circle-o-notch"),D=$("<div/>").addClass("user-panel__corner").appendTo(w),E=$("<div/>").addClass("user-panel__stats").appendTo(w);var B,A=null,G=y.find(".global__image-outer-wrap--avatar-small").not(".global__image-outer-wrap--missing-image").children();$.each(G,function(H,J){var I=$(J);if(!~I.parent().attr("href").indexOf("/user/")){return}I.hover(function(K){var L=$(this);if(B){window.clearTimeout(B);B=null}B=window.setTimeout(function(){var O=L.parent();if(O.attr("href")!=A){C.attr("href",O.attr("href"));C.find("div").css("background-image",L.css("background-image"));n.applyGradients(E.html(""),"#515763 0%, #2f3540 100%");n.applyGradients(D.html(x),"#424751 0%, #2f3540 100%");$.ajax({method:"GET",url:O.attr("href")}).done(function(V){var T=$(V);A=O.attr("href");var R=T.find(".sidebar__suspension-time"),W=$("<div/>").addClass("featured__table__row__left").html(T.find(".featured__heading"));if(R.length){W.find(".featured__heading__medium").css("color","#000").attr("title","Suspension length: "+R.text())}var U=T.find(".featured__outer-wrap--user").css("background-color"),P=T.find(".featured__table__row__right").find("a").css("color"),S=T.find(".sidebar__shortcut-inner-wrap");S.find(".js__submit-form-inner").remove();S.find("a").remove();D.html(S);n.applyGradients(D,P+" -120%, "+U+" 65%");E.append(T.find(".featured__table__column").last().prepend($("<div/>").addClass("featured__table__row").css("padding-top","0").append(W).append(T.find(".featured__table__column").first().find(".featured__table__row__right")[2])));n.applyGradients(E,P+" -20%, "+U+" 80%");var Q=O.attr("href");k.listenForLists(Q,true);k.tagging.injectEditor(Q,true)})}else{k.listenForLists(A,true)}var M=$(K.target);var N=0;if((M.offset().left+t)>window.innerWidth){N=K.target.offsetWidth-t}s.show().css("left",M.offset().left-1-parseInt(O.css("padding-left"))+N).css("top",M.offset().top-1-parseInt(O.css("padding-top")))},250)},function(){window.clearTimeout(B)})});$(".user-panel__outer-wrap").on("mouseleave",function(){s.hide();$(".sidebar__shortcut__whitelist").off("click");$(".sidebar__shortcut__blacklist").off("click")})},tagging:{show:function(t,s){if(~location.pathname.indexOf("/user/")){return}if(!s){GM_addStyle(".user__tagged{ text-decoration: none; border-radius: 4px; padding: 2px 4px; margin-left: .5em; background-color: rgba(0,0,0,.01);   text-shadow: none; box-shadow: 1px 1px 1px rgba(0,0,0,0.5) inset, -1px -1px 1px rgba(255,255,255,0.5) inset; } ")}$.each(Object.keys(j.users),function(u,v){t.find("a[href='/user/"+v+"']").not(".global__image-outer-wrap").append($("<span/>").addClass("user__tagged").html("<i class='fa fa-tag fa-flip-horizontal'></i> "+j.users[v]))
})},injectEditor:function(s,t){if(!~location.pathname.indexOf("/user/")&&!t){return}if(~s.indexOf("/user/")){s=s.substring(6)}if(s==$(".nav__avatar-outer-wrap").attr("href").substring(6)){return}h.editor(t,"user","users",s)}},listIndication:function(x,v){if(!l.userLists.value||~location.pathname.indexOf("/user/")){return}if(!v){var w=l.userLists.sub.settings.userWhite.value.Foreground||"#2A2",u=l.userLists.sub.settings.userWhite.value.Background||"#FFF",t=l.userLists.sub.settings.userBlack.value.Foreground||"#C55",s=l.userLists.sub.settings.userBlack.value.Background||"#000";if(!~w.indexOf("#")){w="#"+w}if(!~u.indexOf("#")){u="#"+u}if(!~t.indexOf("#")){t="#"+t}if(!~s.indexOf("#")){s="#"+s}GM_addStyle("a.user__whitened{ background-color: "+u+"; color: "+w+" !important; border-radius: 4px; padding: 3px 5px; text-shadow: none; } a.user__blackened{ background-color: "+s+"; color: "+t+" !important; border-radius: 4px; padding: 3px 5px; text-shadow: none; } ")}n.listingPit.getList("white",function(y){g.info("Applying white to "+y.length+" users");$.each(y,function(A,z){x.find("a[href='"+z+"']").not(".global__image-outer-wrap").addClass("user__whitened").attr("title","Whitelisted user").prepend("<i class='fa fa-star-o'></i> ")})});n.listingPit.getList("black",function(y){g.info("Applying black to "+y.length+" users");$.each(y,function(z,A){x.find("a[href='"+A+"']").not(".global__image-outer-wrap").addClass("user__blackened").attr("title","Blacklisted user").prepend("<i class='fa fa-ban'></i> ")})})},listenForLists:function(s,t){if(s.indexOf("/user/")!==0){s="/user/"+s}$(".sidebar__shortcut__whitelist").on("click",function(){n.listingPit.invalidateList("white");n.listingPit.getList("black",function(w){if(w.indexOf(s)>-1){n.listingPit.invalidateList("black")}});if(t){var u="a[href='"+s+"']",v=$(u).not(".global__image-outer-wrap").not($(".user-panel__outer-wrap").find(u));v.attr("title","").removeClass("user__blackened").toggleClass("user__whitened").find("i").not(".fa-tag").remove();if(v.hasClass("user__whitened")){v.attr("title","Whitelisted user").prepend("<i class='fa fa-star-o'></i> ")}}});$(".sidebar__shortcut__blacklist").on("click",function(){n.listingPit.invalidateList("black");n.listingPit.getList("white",function(w){if(w.indexOf(s)>-1){n.listingPit.invalidateList("white")}});if(t){var u="a[href='"+s+"']";var v=$(u).not(".global__image-outer-wrap").not($(".user-panel__outer-wrap").find(u));v.attr("title","").removeClass("user__whitened").toggleClass("user__blackened").find("i").not(".fa-tag").remove();if(v.hasClass("user__blackened")){v.attr("title","Blacklisted user").prepend("<i class='fa fa-ban'></i> ")}}})}},q={tagging:{show:function(){if(~location.pathname.indexOf("/group/")){return}GM_addStyle(".group__tagged{ text-decoration: none; border-radius: 4px; padding: 2px 4px; margin-left: .5em; background-color: rgba(0,0,0,.01);   text-shadow: none; box-shadow: 1px 1px 1px rgba(0,0,0,0.5) inset, -1px -1px 1px rgba(255,255,255,0.5) inset; } ");$.each(Object.keys(j.groups),function(s,t){r.find("a[href='/group/"+t+"']").not(".global__image-outer-wrap").append($("<span/>").addClass("group__tagged").html("<i class='fa fa-tag fa-flip-horizontal'></i> "+j.groups[t]))
})},injectEditor:function(t,s){if(!~location.pathname.indexOf("/group/")&&!s){return}if(~t.indexOf("/group/")){t=t.substring(6)}h.editor(s,"group","groups",t)}}},h={editor:function(w,x,v,u){var s=j[v][u]||"Add Custom Tag",t="<i class='fa fa-tag fa-flip-horizontal' style='font-size: 14px;'></i> ";$("<div/>").attr("href","#").html("<a>"+t+s+"</a>").css("color",$(".featured__table__row__right").find("a").css("color")).on("click",function(z){var y=$(this);if(y.children("input").length){return}y.html("<input type='text' placeholder='Custom Tag' value='"+(j[v][u]||"")+"' maxlength='16' />").on("keypress",function(B){var C=$(this),A=B.which||B.keyCode;if(A==13){var D=$(this).children("input").val();y.html("<a>"+t+(D||"Add Custom Tag")+"</a>");$("a[href='/"+x+"/"+u+"']").find("."+x+"__tagged").remove();if(D){j[v][u]=D;if(w){$("a[href='/"+x+"/"+u+"']").not(".global__image-outer-wrap").append($("<span/>").addClass(x+"__tagged").html("<i class='fa fa-tag fa-flip-horizontal'></i> "+j[v][u]));$("."+x+"-panel__outer-wrap").find("."+x+"__tagged").remove()}}else{delete j[v][u]}GM_setValue(x+"Tags",JSON.stringify(j[v]));C.off("keypress")}else{if(A==27){y.html("<a>"+t+(j[v][u]||"Add Custom Tag")+"</a>");C.off("keypress")}}});y.find("input").select().focus().on("blur",function(){y.html("<a>"+t+s+"</a>");$(this).parent().off("keypress")})}).insertAfter((w?"."+x+"-panel__outer-wrap ":"")+".featured__heading__medium")}};pointless={kccode:function(){GM_addStyle("*{ direction: rtl; } ");$(".fa").addClass("fa-spin")}};(function(){try{o.injectPage();o.injectMenu();o.invalidateOnSync();a.header();a.sidebar();a.footer();d.trade();d.threads();d.thanks();d.giveaways();d.points();c.injectFlags.all(r);c.injectChance(r);c.injectSearch(r);c.injectNavSearch();c.hideEntered(r);c.easyHide(r);c.gridForm(r);c.activeThreads.find();i.removeMyGA();i.injectSGTools();p.injectTimes(r);p.tracking.all(r);k.profileHover(r);k.tagging.show(r);k.tagging.injectEditor($(".featured__heading__medium").text());k.listIndication(r);k.listenForLists($(".featured__heading__medium").text());q.tagging.show();q.tagging.injectEditor(location.pathname.substring(location.pathname.indexOf("/group/")+7));window.setTimeout(function(){r.scroll();c.bulkFeatured.find();p.collapseDiscussion();p.collapseTrade()},100)}catch(s){g.warn(s)}})();var e=[38,38,40,40,37,39,37,39,98,97],f=0;r.on("keypress",function(s){if(s.keyCode==e[f]||s.which==e[f]){if(++f==e.length){console.log("[RIBBIT] - Command received - Iniitiating sequence..");pointless.kccode()}}else{f=0}});console.log("[RIBBIT] - SGT Mode Activated!")})();